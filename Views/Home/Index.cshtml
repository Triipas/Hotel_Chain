@model List<Hotel_chain.Models.Entities.Hotel>
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
    ViewData["Title"] = "Inicio";
}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Costa Dorada - Home</title>
    <link rel="stylesheet" href="~/client/css/main.css?v=6">
</head>
<body>
    <header>
        <nav class="navbar">    
            <div class="logo">
                <span class="logo-text">Costa <span class="resaltado">Dorada</span></span>
            </div>
            <button class="menu-toggle" aria-label="Abrir menú">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="nav-derecha">
                <ul class="nav-links">
                    <li><a asp-controller="Home" asp-action="Index" style="color: #0077cc;">Home</a></li>
                    <li><a asp-controller="Hotel" asp-action="Index">Hoteles</a></li>
                    <li><a>Habitaciones</a></li> 
                    <li><a asp-controller="SobreNosotros" asp-action="Index">Sobre Nosotros</a></li>
                </ul>
                @if (HttpContextAccessor.HttpContext.Session.GetString("UsuarioNombre") == null)
                {
                    <a asp-controller="Login" asp-action="Index"><button class="login-btn">Ingresar</button></a>
                }
            </div>
        </nav>
    </header>

    <main>
        <section class="hero">
            <div class="hero-text">
                <h1>Menos trabajo,<br>más vacaciones.</h1>
                <p>Te ofrecemos lo necesario para disfrutar de tus vacaciones en familia.<br>Es hora de crear momentos inolvidables.</p>
                <a asp-controller="Hotel" asp-action="Index">
                    <button class="mostrar-mas">Mostrar más</button>
                </a>
                <div class="stats-stack">
                    <div class="stats-images">
                        <div class="stat-img">
                            <img src="~/client/imagenes/icons/usuarios.png" 
                                data-gif="@Url.Content("~/client/imagenes/icons/usuarios.gif")"
                                alt="Usuarios">
                        </div>
                        <div class="stat-img">
                            <img src="~/client/imagenes/icons/imagenes.png" 
                                data-gif="@Url.Content("~/client/imagenes/icons/imagenes.gif")"
                                alt="Imágenes">
                        </div>
                        <div class="stat-img">
                            <img src="~/client/imagenes/icons/ciudades.png" 
                                data-gif="@Url.Content("~/client/imagenes/icons/ciudades.gif")"
                                alt="Ciudades">
                        </div>
                    </div>
                    <div class="stats-texts">
                        <div class="stat-text"><strong>50</strong><span>Usuarios</span></div>
                        <div class="stat-text"><strong>100</strong><span>Imagenes</span></div>
                        <div class="stat-text"><strong>10</strong><span>Ciudades</span></div>
                    </div>
                </div>
            </div>
            <div class="hero-imagen"></div>
        </section>

    

        <section class="hoteles-recomendados">
            <h2>Hoteles recomendados</h2> 
            <div class="hoteles-container">
                @if (Model != null && Model.Any())
                {
                    var random = new Random();
                    var recomendados = Model.OrderBy(x => random.Next()).Take(6);

                    foreach (var hotel in recomendados)
                    {
                        <div class="hotel-card">
                            <img src="~/client/imagenes/hotel1.jpg" alt="Hotel" class="hotel-img" />
                            <h3>@hotel.Nombre</h3>
                            <p>@hotel.Ciudad</p>
                            <p>@hotel.Descripcion</p>
                            <a href="/Habitacion/Index?hotelId=@hotel.HotelId" class="btn-reservar">Ver habitaciones</a>
                        </div>
                    }
                }
                else
                {
                    <p>No hay hoteles registrados aún.</p>
                }
            </div>
        </section>
    </main>

    <!-- Menú Flotante (solo si hay sesión) -->
    @if (HttpContextAccessor.HttpContext.Session.GetString("UsuarioNombre") != null)
    {
        <div class="menu-flotante" id="menuFlotante">
            <!-- Opciones del menú (ocultas inicialmente) -->
            <a asp-controller="Reservas" asp-action="MisReservas" class="menu-option" id="opcionReservas">
                <div class="menu-icon">📅</div>
                <span>Mis Reservas</span>
            </a>

            <a asp-controller="Login" asp-action="Logout" class="menu-option" id="opcionCerrar">
                <div class="menu-icon">🚪</div>
                <span>Cerrar Sesión</span>
            </a>

            <!-- Botón Principal (Perfil) -->
            <button class="menu-principal" id="btnMenuPrincipal">
                <div class="user-avatar">👤</div>
            </button>
        </div>
    }

    <footer class="footer">
        <div class="footer-contenido">
            <div class="footer-logo">
                <span class="logo-text">Costa<span class="resaltado">Dorada</span></span>
                <p>Hacemos que tus vacaciones de belleza sean instantáneas y memorables.</p>
            </div>
            <div class="footer-panel">
                <p>¿Eres nuestro socio? Entra a tu propio panel</p>
                <a href="/Admin/Login">
                <button class="btn-panel-admin">Iniciar Sesión</button>
                </a>
            </div>
        </div>
    </footer>
      
    <script src="~/client/js/responsive-navbar.js"></script>
    <script src="~/client/js/menu-flotante.js"></script>
   
    <script>
        // Activar GIFs al pasar el mouse
        document.querySelectorAll('.stat-img img').forEach(img => {
            const staticSrc = img.src;
            const gifSrc = img.getAttribute('data-gif');
            
            if (gifSrc) {
                img.parentElement.addEventListener('mouseenter', () => {
                    img.src = gifSrc;
                });
                
                img.parentElement.addEventListener('mouseleave', () => {
                    img.src = staticSrc;
                });
            }
        });
    </script>

   <link rel="stylesheet" href="~/client/css/chatbot.css">
<script src="~/client/js/chatbot.js"></script>



<style>
/* Estilos para hoteles recomendados */
.hoteles-recomendados {
    padding: 60px 40px;
    background-color: #f9f9f9;
}

.hoteles-recomendados h2 {
    text-align: center;
    margin-bottom: 40px;
    font-size: 2rem;
    color: #152C5B;
    font-weight: 600;
}

.hoteles-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 30px;
    max-width: 1200px;
    margin: 0 auto;
}

.hotel-card {
    background-color: white;
    border: 1px solid #e0e0e0;
    border-radius: 12px;
    overflow: hidden;
    text-align: center;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    display: flex;
    flex-direction: column;
}

.hotel-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
}

.hotel-img {
    width: 100%;
    height: 200px;
    object-fit: cover;
    display: block;
}

.hotel-card h3 {
    font-size: 1.25rem;
    margin: 20px 15px 10px;
    color: #152C5B;
    font-weight: 600;
}

.hotel-card p {
    font-size: 0.9rem;
    color: #666;
    margin: 0 15px 15px;
    line-height: 1.5;
    flex: 1;
}

.btn-reservar {
    display: inline-block;
    margin: 0 15px 20px;
    padding: 12px 24px;
    background-color: #0077cc;
    color: white;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 600;
    transition: all 0.3s ease;
}

.btn-reservar:hover {
    background-color: #005fa3;
    transform: translateY(-2px);
    color: white;
}

/* Responsive */
@@media (max-width: 768px) {
    .hoteles-container {
        grid-template-columns: 1fr;
        padding: 0 15px;
    }
    
    .hoteles-recomendados {
        padding: 40px 20px;
    }
    
    .hoteles-recomendados h2 {
        font-size: 1.5rem;
    }
}
</style>

</body>
</html>