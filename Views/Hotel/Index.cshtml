@model List<Hotel_chain.Models.Entities.Hotel>
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
    ViewData["Title"] = "Hoteles";
}
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title> Costa Dorada - Hoteles</title>
    <link rel="stylesheet" href="~/client/css/main.css?v=8">
</head>
<header>
        <nav class="navbar">
            <div class="logo">Costa Dorada</div>
            <button class="menu-toggle" aria-label="Abrir menÃº">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="nav-derecha">
                <ul class="nav-links">
                    <li><a asp-controller="Home" asp-action="Index">Home</a></li>
                    <li><a asp-controller="Hotel" asp-action="Index" style="color: #0077cc;">Hoteles</a></li>
                    <li><a>Habitaciones</a></li>
                    <li><a asp-controller="Servicios" asp-action="Index">Servicios</a></li>
                    <li><a asp-controller="SobreNosotros" asp-action="Index">Sobre Nosotros</a></li>
                </ul>
                @if (HttpContextAccessor.HttpContext.Session.GetString("UsuarioNombre") == null)
                {
                    <a asp-controller="Login" asp-action="Index"><button class="login-btn">Ingresar</button></a>
                }
            </div>
        </nav>
</header> 
 
<section class="listado-hoteles">
    @if (Model != null && Model.Any())
    {
        <!-- SECCIÃ“N SUPERIOR: 3 columnas x 2 filas -->
        <div class="hoteles-grid-superior">
            @for (int i = 0; i < Math.Min(5, Model.Count); i++)
            {
                var hotel = Model[i];
                <div class="hotel-card @(i == 0 ? "card-tall" : "")">
                    <img src="~/client/imagenes/@hotel.Imagenes.FirstOrDefault()?.NombreArchivo" 
                         alt="@hotel.Nombre" class="hotel-img" />
                    <div class="hotel-overlay">
                        <div class="hotel-info">
                            <h3>@hotel.Nombre</h3>
                            <p class="hotel-ubicacion">@hotel.Ciudad</p>
                        </div>
                        <a asp-controller="Hotel" asp-action="Detalle" asp-route-id="@hotel.HotelId" class="btn-ver-detalles">
                            Ver detalles
                        </a>
                    </div>
                </div>
            }
        </div>

        <!-- SECCIÃ“N INFERIOR: 4 columnas horizontales -->
        @if (Model.Count > 5)
        {
            <div class="hoteles-grid-inferior">
                @for (int i = 5; i < Math.Min(9, Model.Count); i++)
                {
                    var hotel = Model[i];
                    <div class="hotel-card">
                        <img src="~/client/imagenes/@hotel.Imagenes.FirstOrDefault()?.NombreArchivo" 
                             alt="@hotel.Nombre" class="hotel-img" />
                        <div class="hotel-overlay">
                            <div class="hotel-info">
                                <h3>@hotel.Nombre</h3>
                                <p class="hotel-ubicacion">@hotel.Ciudad</p>
                            </div>
                            <a asp-controller="Hotel" asp-action="Detalle" asp-route-id="@hotel.HotelId" class="btn-ver-detalles">
                                Ver detalles
                            </a>
                        </div>
                    </div>
                }
            </div>
        }

        <!-- Hoteles adicionales (si hay mÃ¡s de 9) -->
        @if (Model.Count > 9)
        {
            <div class="hoteles-grid-adicionales">
                @for (int i = 9; i < Model.Count; i++)
                {
                    var hotel = Model[i];
                    <div class="hotel-card">
                        <img src="~/client/imagenes/@hotel.Imagenes.FirstOrDefault()?.NombreArchivo" 
                             alt="@hotel.Nombre" class="hotel-img" />
                        <div class="hotel-overlay">
                            <div class="hotel-info">
                                <h3>@hotel.Nombre</h3>
                                <p class="hotel-ubicacion">@hotel.Ciudad</p>
                            </div>
                            <a asp-controller="Hotel" asp-action="Detalle" asp-route-id="@hotel.HotelId" class="btn-ver-detalles">
                                Ver detalles
                            </a>
                        </div>
                    </div>
                }
            </div>
        }
    }
    else
    {
        <p class="no-hoteles">No hay hoteles registrados aÃºn.</p>
    }

    <!-- MenÃº Flotante (solo si hay sesiÃ³n) -->
    @if (HttpContextAccessor.HttpContext.Session.GetString("UsuarioNombre") != null)
    {
        <div class="menu-flotante" id="menuFlotante">
            <!-- Opciones del menÃº (ocultas inicialmente) -->
            <a asp-controller="Reservas" asp-action="MisReservas" class="menu-option" id="opcionReservas">
                <div class="menu-icon">ðŸ“…</div>
                <span>Mis Reservas</span>
            </a>

            <a asp-controller="Login" asp-action="Logout" class="menu-option" id="opcionCerrar">
                <div class="menu-icon">ðŸšª</div>
                <span>Cerrar SesiÃ³n</span>
            </a>

            <!-- BotÃ³n Principal (Perfil) -->
            <button class="menu-principal" id="btnMenuPrincipal">
                <div class="user-avatar">ðŸ‘¤</div>
            </button>
        </div>
    }
</section>
<link rel="stylesheet" href="~/client/css/chatbot.css">
<script src="~/client/js/chatbot.js"></script>
<script src="~/client/js/responsive-navbar.js"></script>
<script src="~/client/js/menu-flotante.js"></script>