@model List<Hotel_chain.Models.Entities.Hotel>
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@{
    ViewData["Title"] = "Hoteles";
}
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title> Costa Dorada - Hoteles</title>
    <link rel="stylesheet" href="~/client/css/main.css?v=7">
</head>
<header>
        <nav class="navbar">
            <div class="logo">Costa Dorada</div>
            <button class="menu-toggle" aria-label="Abrir menú">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="nav-derecha">
                <ul class="nav-links">
                    <li><a asp-controller="Home" asp-action="Index">Home</a></li>
                    <li><a asp-controller="Hotel" asp-action="Index">Hoteles</a></li>
                    <li><a asp-controller="Habitacion" asp-action="Index">Habitaciones</a></li>
                    <li><a asp-controller="Servicios" asp-action="Index">Servicios</a></li>
                    <li><a asp-controller="SobreNosotros" asp-action="Index">Sobre Nosotros</a></li>
                </ul>
                @if (HttpContextAccessor.HttpContext.Session.GetString("UsuarioNombre") != null)
                {
                    <span>Bienvenido, @HttpContextAccessor.HttpContext.Session.GetString("UsuarioNombre")</span>
                    <a asp-controller="Login" asp-action="Logout"><button>Cerrar Sesión</button></a>
                }
                else
                {
                    <a asp-controller="Login" asp-action="Index"><button class="login-btn">Ingresar</button></a>
                }
            </div>
        </nav>
    </header>

<section class="filtro-hoteles">
    <h2>Filtrar hoteles</h2>
    <form method="get" class="filtro-form">
        <select name="ubicacion">
            <option value="">Ubicación</option>
            <option value="Lima">Lima</option>
            <option value="Cusco">Cusco</option>
            <option value="Arequipa">Arequipa</option>
        </select>

        <input type="text" name="nombre" placeholder="Buscar hotel por nombre" />

        <button type="submit">Buscar</button>
    </form>
</section>

<section class="listado-hoteles">
    <h2>Todos los hoteles</h2>
    <div class="hoteles-container">
                @if (Model != null && Model.Any())
        {
            foreach (var hotel in Model)
            {
                <div class="hotel-card">
                    <img src="~/client/imagenes/@hotel.Imagenes.FirstOrDefault()?.NombreArchivo" 
                         alt="@hotel.Nombre" class="hotel-img" />
                    <h3>@hotel.Nombre</h3>
                    <p>@hotel.Ciudad</p>
                    <p>@hotel.Descripcion</p>
                     <a asp-controller="Hotel" asp-action="Detalle" asp-route-id="@hotel.HotelId" class="btn-reservar">
                        Ver detalles
                    </a>
                </div>
            }
        }
        else
        {
            <p>No hay hoteles registrados aún.</p>
        }
    </div>
</section>
<script src="~/client/js/responsive-navbar.js"></script>